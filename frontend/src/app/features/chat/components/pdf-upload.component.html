@if (compact) {
  <!-- Compact mode: input bar with upload button -->
  <div class="flex items-center gap-2">
    <div class="flex-1 relative">
      <input
        type="text"
        placeholder="Tell me what you need ...."
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary pr-12"
        [disabled]="isUploading"
      />
      <label class="absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer">
        <input
          type="file"
          accept=".pdf"
          (change)="onFileSelect($event)"
          class="hidden"
          [disabled]="isUploading"
        />
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
        </svg>
      </label>
    </div>
    @if (isUploading) {
      <div class="text-sm text-gray-500">Analyzing...</div>
    }
  </div>
} @else {
  <!-- Full mode: drag & drop zone -->
  <div
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    [class.border-primary]="isDragging"
    [class.bg-blue-50]="isDragging"
    class="border-2 border-dashed border-gray-300 rounded-xl p-12 text-center transition-colors cursor-pointer hover:border-gray-400"
  >
    @if (isUploading) {
      <div class="space-y-3">
        <div class="animate-spin mx-auto h-10 w-10 border-4 border-primary border-t-transparent rounded-full"></div>
        <p class="text-gray-600">Analyzing {{ selectedFileName }}...</p>
      </div>
    } @else {
      <div class="space-y-4">
        <div class="mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
          </svg>
        </div>
        <div>
          <p class="text-gray-700 font-medium">Drop your PDF here</p>
          <p class="text-gray-400 text-sm mt-1">or click to browse</p>
        </div>
        <label class="inline-block">
          <input
            type="file"
            accept=".pdf"
            (change)="onFileSelect($event)"
            class="hidden"
          />
          <span class="bg-primary text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer text-sm">
            Select PDF
          </span>
        </label>
      </div>
    }
  </div>
}
